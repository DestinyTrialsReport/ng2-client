<div class="card maps" [@animation]="slideMap">
  <div class="card__header card__header--high" [ngStyle]="{'background-image': 'url(https://www.bungie.net' + (mapInfo$ | async)?.pgcrImage + ')'}">
    <div class="row middle-xs">
      <div class="col-xs">
        <h2 class="card__header__title" [innerHtml]="(mapInfo$ | async)?.name"></h2>
        <!-- TODO: Add popover in case of rotating maps -->
        <div class="data-label" [innerHtml]="(mapInfo$ | async)?.weekText + '\'s map'"></div>
      </div>
      <div class="col-xs-shrink">
        <div class="card__header__controls">
          <button class="btn btn--icon btn--ghost" [style.opacity]="(mapInfo$ | async)?.week > 1 ? 1 : .2" (click)="previousMap()">
            <i class="material-icons">&#xE5CB;</i>
          </button>
          <button class="btn btn--icon btn--ghost" [style.opacity]="(mapInfo$ | async)?.week == maxWeek ? .2 : 1" (click)="nextMap()">
            <i class="material-icons">&#xE5CC;</i>
          </button>
        </div>
        <div class="data-label">Other weeks</div>
      </div>
    </div>
  </div>
  <div class="card__content">
    <div class="row">
      <div class="col-xs-6 col-sm-3">
        <div class="stat__number" [innerHtml]="(mapInfo$ | async)?.lighthouse | number"></div>
        <div class="stat__label">Accounts flawless</div>
      </div>
      <div class="col-xs-6 col-sm-3 stat">
        <div class="stat__number" [innerHtml]="(mapInfo$ | async)?.players | number"></div>
        <div class="stat__label">Accounts participated</div>
      </div>
      <div class="col-xs-6 col-sm-3 stat">
        <div class="stat__number" [innerHtml]="(mapInfo$ | async)?.matches | number"></div>
        <div class="stat__label">Total matches</div>
      </div>
      <div class="col-xs-6 col-sm-3 stat">
        <div class="stat__number" [innerHtml]="(mapInfo$ | async)?.kills | number"></div>
        <div class="stat__label">Total kills</div>
      </div>
    </div>
    <hr>
    <weapon-usage></weapon-usage>
    <hr>
    <guardian-weapons></guardian-weapons>
  </div>
</div>
